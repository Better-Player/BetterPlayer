import org.apache.tools.ant.filters.ReplaceTokens
import com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar

plugins {
    id 'java'
    id 'eclipse'
	id 'com.github.johnrengelman.shadow' version '5.0.0'
	id 'application'
}

allprojects {
	sourceCompatibility = 1.11
	targetCompatibility = 1.11

	repositories {
		jcenter()
		mavenCentral()
    }
}

dependencies {
	compile 'net.dv8tion:JDA:4.2.0_227'
	compile 'com.sedmelluq:lavaplayer:1.3.66'
	
	compile 'org.yaml:snakeyaml:1.27'
}

task releaseJar(type: ShadowJar) {
	description 'Build a release Jar'
	archiveClassifier = 'RELEASE'
	from sourceSets.main.output
	destinationDirectory = file("$rootDir/releases")
}

//This task is for GitHub Actions only
task ghActions(type: ShadowJar) {	
	description 'GitHub Actions Task. Do not use in regular development!'
	version = ''
	archiveClassifier = ''
	archiveBaseName = 'output'
	
	from sourceSets.main.output
	destinationDirectory = file("$rootDir/actions")
}

application {
	mainClassName = 'nl.thedutchmc.betterplayer.BetterPlayer'	
}

